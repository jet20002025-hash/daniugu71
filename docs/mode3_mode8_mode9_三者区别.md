# mode3 / mode8 / mode9 三套模型区别说明

三个模型**彼此独立**，定位与规则均不同，不可混用。

---

## 一、定位与用途

| 模型 | 定位 | 用途 |
|------|------|------|
| **mode3** | 71 倍原版 | 日线均线+放量+涨幅约束，原版公式，回测与对比基准 |
| **mode8** | 大牛股买点 | 在 mode3 思路上针对大牛样本归纳：放宽 20 日涨幅、增加 60 日涨幅过滤与加分 |
| **mode9** | 当前主模型 | 在 mode3 信号基础上做评分升级：均线整齐度、量比、拐回、前高突破等，选股更细 |

---

## 二、信号条件（谁可出信号）

| 项目 | mode3（71倍） | mode8（大牛买点） | mode9（主模型） |
|------|----------------|-------------------|-----------------|
| 20 日涨幅 | ≤ **25%** | ≤ **50%** | ≤ **25%**（与 mode3 一致） |
| 买点前 60 日涨幅 | 无 | **-15% ≤ ret60 ≤ 50%** | 无 |
| 均线、放量、收盘≥MA20 | 同 | 同 | 同 |
| 起算 K 线 | 60 根 | 60 根 | 60 根 |

- **mode3 与 mode9**：信号条件**完全一致**（mode9 复用 mode3 的信号逻辑，只改评分）。
- **mode8**：信号**与 mode3/mode9 不同**（放宽 ret20、增加 ret60 过滤）。

---

## 三、评分逻辑（同一信号日下的打分）

| 模型 | 评分基础 | 额外规则 |
|------|----------|----------|
| **mode3** | 基础分 + MA 间距/量比/收盘距 MA20/近 3 日涨幅/MA5 拐头等 | 无，见 71倍模型公式.md |
| **mode8** | **mode3 评分** | 0%≤ret60≤35% 加 5 分；-10%≤ret60<0% 加 2 分 |
| **mode9** | **mode3 评分** | 收盘距 MA20 过远/MA5 斜率/MA20–MA60 开口/实体占比/60 日涨幅/量能放大/均线整齐度/前一日破 MA 等多项加减，见 mode9模型说明.md |

三者**评分体系完全不同**：mode3 原版一套，mode8 在 mode3 上只加 ret60 两项，mode9 在 mode3 上做大量细化加减。

---

## 四、代码对应关系

| 模型 | 信号函数 | 评分函数 |
|------|----------|----------|
| mode3 | `_mode3_signals` | `_score_mode3` |
| mode8 | `_mode8_signals` | `_score_mode8` |
| mode9 | `_mode9_signals`（内部调用 `_mode3_signals`） | `_score_mode9` |

实现位置：`app/scanner.py`。  
扫描时分别传 `use_mode3`（默认）、`use_mode8=True`、`use_mode9=True`，三者互不共用信号与评分。

---

## 五、小结

- **mode3**：71 倍原版，信号 + 评分均为原版一套。
- **mode8**：大牛股买点，**信号**放宽 ret20、增加 ret60；**评分**在 mode3 基础上只加 ret60 两项。
- **mode9**：主模型，**信号**与 mode3 一致；**评分**在 mode3 基础上做多项细化（均线整齐度、量比、拐回等）。

因此：**三个模型在「谁出信号」和「怎么打分」上都彼此不同**；其中 mode3 与 mode9 仅共享同一套信号条件，评分完全不同；mode8 信号与评分均与 mode3/mode9 不同。
